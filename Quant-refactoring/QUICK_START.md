# ğŸš€ ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ

ì‹¤ì „ íŠ¸ë ˆì´ë”© ì‹œìŠ¤í…œ ì‚¬ìš©ë²•

---

## ğŸ“‹ ì‚¬ì „ ì¤€ë¹„

### 1. ë°ì´í„° ì¤€ë¹„

```bash
# ë°ì´í„° ìœ„ì¹˜
./VIEW/
â”œâ”€â”€ symbol_list.csv                    # ì‹¬ë³¼ ëª©ë¡ (sector ì •ë³´ í¬í•¨)
â”œâ”€â”€ price.csv                          # ê°€ê²© ë°ì´í„°
â”œâ”€â”€ financial_statement_2018.csv       # ì¬ë¬´ì œí‘œ
â”œâ”€â”€ financial_statement_2019.csv
â”œâ”€â”€ ...
â””â”€â”€ financial_statement_2023.csv
```

### 2. í•„ìˆ˜ ì»¬ëŸ¼

**symbol_list.csv**:
- `symbol`: ì£¼ì‹ ì‹¬ë³¼
- `sector`: ì„¹í„° ì •ë³´ (Technology, Financial, Healthcare, Consumer, Industrial ë“±)

**financial_statement_YYYY.csv**:
- `symbol`: ì£¼ì‹ ì‹¬ë³¼
- `date`: ë‚ ì§œ
- `close`: ì¢…ê°€
- ì¬ë¬´ ì§€í‘œë“¤ (revenue, netIncome, totalAssets, ...)

---

## ğŸ¯ ì‚¬ìš© ë°©ë²•

### Option 1: ì „ì²´ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ (ê¶Œì¥)

```bash
cd Quant-refactoring/scripts
python run_full_pipeline.py
```

ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” 3ë‹¨ê³„ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤:
1. ë¦¬ë°¸ëŸ°ì‹± ê¸°ê°„ ìµœì í™” (ì„ íƒ ì‚¬í•­)
2. ëª¨ë¸ ì„±ëŠ¥ ë¹„êµ (ì„ íƒ ì‚¬í•­)
3. ì„¹í„°ë³„ ì£¼ì‹ ì„ íƒ (í•„ìˆ˜)

**ì„¤ì • ë³€ê²½**:
```python
# run_full_pipeline.py íŒŒì¼ì—ì„œ
RUN_REBALANCE_OPTIMIZATION = False  # ìµœì´ˆ 1íšŒë§Œ True
RUN_MODEL_COMPARISON = False         # ëª¨ë¸ ë³€ê²½ ì‹œì—ë§Œ True
RUN_SECTOR_TRADING = True            # ë§¤ë²ˆ True
```

---

### Option 2: ê°œë³„ ì‹¤í–‰

#### 1ï¸âƒ£ ë¦¬ë°¸ëŸ°ì‹± ê¸°ê°„ ìµœì í™” (ìµœì´ˆ 1íšŒ)

```bash
python scripts/run_rebalance_optimization.py
```

**ì¶œë ¥**:
- ìµœì  ë¦¬ë°¸ëŸ°ì‹± ê¸°ê°„
- ê° ê¸°ê°„ë³„ ì„±ëŠ¥ ë©”íŠ¸ë¦­
- ê²°ê³¼ ì €ì¥: `./results/rebalancing_optimization/`
- ì„¤ì • ì €ì¥: `./config/optimal_rebalance_period.txt`

#### 2ï¸âƒ£ ëª¨ë¸ ì„±ëŠ¥ ë¹„êµ (ëª¨ë¸ ë³€ê²½ ì‹œ)

```bash
python scripts/run_model_comparison.py
```

**ì¶œë ¥**:
- ì—¬ëŸ¬ ëª¨ë¸ ë²„ì „ ë¹„êµ
- í†µê³„ì  ìœ ì˜ì„± ê²€ì •
- ìµœê³  ì„±ëŠ¥ ëª¨ë¸ ì„ íƒ
- ê²°ê³¼ ì €ì¥: `./results/model_comparison/`
- ì„¤ì • ì €ì¥: `./config/best_model.txt`

#### 3ï¸âƒ£ ì„¹í„°ë³„ ì£¼ì‹ ì„ íƒ (ë§¤ ë¦¬ë°¸ëŸ°ì‹±ë§ˆë‹¤)

```bash
python scripts/run_sector_trading.py
```

**ì¶œë ¥**:
- ì„ íƒëœ top N ì£¼ì‹
- ì„¹í„°ë³„ ë¶„í¬
- ì˜ˆì¸¡ ì ìˆ˜
- ê²°ê³¼ ì €ì¥: `./results/sector_trading/selected_stocks_YYYYMMDD_HHMMSS.csv`

---

## ğŸ“Š ì‹¤í–‰ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. ë¦¬ë°¸ëŸ°ì‹± ê¸°ê°„ ìµœì í™” (ìµœì´ˆ 1íšŒ)       â”‚
â”‚                                         â”‚
â”‚  â€¢ 1ê°œì›”, 2ê°œì›”, 3ê°œì›”, 6ê°œì›” ë“± í…ŒìŠ¤íŠ¸  â”‚
â”‚  â€¢ ìµœì  ê¸°ê°„ ì„ íƒ (ì˜ˆ: 3ê°œì›”)            â”‚
â”‚  â€¢ ./config/optimal_rebalance_period.txtâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. ëª¨ë¸ ì„±ëŠ¥ ë¹„êµ (ëª¨ë¸ ë³€ê²½ ì‹œ)         â”‚
â”‚                                         â”‚
â”‚  â€¢ XGBoost v1 vs v2                     â”‚
â”‚  â€¢ LightGBM vs CatBoost                 â”‚
â”‚  â€¢ í†µê³„ì  ê²€ì¦                          â”‚
â”‚  â€¢ ./config/best_model.txt              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. ì„¹í„°ë³„ ì£¼ì‹ ì„ íƒ (ë§¤ ë¦¬ë°¸ëŸ°ì‹±)        â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚Technologyâ”‚  â”‚Financial â”‚             â”‚
â”‚  â”‚ë‹¤ë¥¸ í”¼ì²˜  â”‚  â”‚ë‹¤ë¥¸ í”¼ì²˜  â”‚             â”‚
â”‚  â”‚ë‹¤ë¥¸ ëª¨ë¸  â”‚  â”‚ë‹¤ë¥¸ ëª¨ë¸  â”‚             â”‚
â”‚  â”‚  â†“       â”‚  â”‚  â†“       â”‚             â”‚
â”‚  â”‚ì˜ˆì¸¡ ì ìˆ˜  â”‚  â”‚ì˜ˆì¸¡ ì ìˆ˜  â”‚   ...       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚         â†“           â†“                   â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚    â”‚ ì „ì²´ì—ì„œ top 10   â”‚                â”‚
â”‚    â”‚ ì„ íƒ (ì„¹í„° ë¬´ê´€)  â”‚                â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                         â”‚
â”‚  ê²°ê³¼: TECH_001, FIN_002, HLTH_003, ... â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ ì„¤ì • ì»¤ìŠ¤í„°ë§ˆì´ì§•

### ë¦¬ë°¸ëŸ°ì‹± ê¸°ê°„ ë³€ê²½

`scripts/run_rebalance_optimization.py`:
```python
PERIODS_TO_TEST = [1, 2, 3, 4, 6, 12]  # í…ŒìŠ¤íŠ¸í•  ê¸°ê°„ë“¤
```

### ì„ íƒí•  ì£¼ì‹ ê°œìˆ˜ ë³€ê²½

`scripts/run_sector_trading.py`:
```python
TOP_K = 10  # 5ê°œ or 10ê°œ or 20ê°œ
```

### ì„¹í„°ë³„ í”¼ì²˜ ë³€ê²½

`strategy/sector_ensemble.py`ì˜ `create_default_sector_configs()` í•¨ìˆ˜ ìˆ˜ì •:

```python
'Technology': {
    'feature_cols': [
        'revenue',
        'OverMC_researchAndDevelopmentExpenses',  # Techì— ì¤‘ìš”!
        'priceToBookRatio',
        # ... ì¶”ê°€/ì œê±°
    ],
    'model_params': {'n_estimators': 100, 'max_depth': 6}
}
```

---

## ğŸ“ˆ ì‹¤ì „ ì‚¬ìš© ì˜ˆì‹œ

### ì‹œë‚˜ë¦¬ì˜¤: 2024ë…„ 1ì›” 1ì¼ ë¦¬ë°¸ëŸ°ì‹±

```bash
# 1. (ìµœì´ˆ 1íšŒ) ìµœì  ë¦¬ë°¸ëŸ°ì‹± ê¸°ê°„ ì°¾ê¸°
python scripts/run_rebalance_optimization.py
# ì¶œë ¥: ìµœì  ê¸°ê°„ = 3ê°œì›”

# 2. (ëª¨ë¸ ë³€ê²½ ì‹œ) ëª¨ë¸ ì„±ëŠ¥ ë¹„êµ
python scripts/run_model_comparison.py
# ì¶œë ¥: XGBoost_v2ê°€ v1ë³´ë‹¤ 3% ê°œì„ 

# 3. (ë§¤ ë¦¬ë°¸ëŸ°ì‹±) ì£¼ì‹ ì„ íƒ
python scripts/run_sector_trading.py
# ì¶œë ¥:
# 1. TECH_001 (Technology, ì ìˆ˜: 0.92)
# 2. FIN_002 (Financial, ì ìˆ˜: 0.88)
# 3. HLTH_003 (Healthcare, ì ìˆ˜: 0.85)
# ...
```

### ê²°ê³¼ í™•ì¸

```bash
cat ./results/sector_trading/selected_stocks_20240101_090000.csv
```

---

## ğŸ”„ ì •ê¸° ì‹¤í–‰ (ìë™í™”)

### Cron Job ì„¤ì •

```bash
# ë§¤ë‹¬ 1ì¼ ì˜¤ì „ 9ì‹œì— ì‹¤í–‰
0 9 1 * * cd /path/to/Quant-refactoring && python scripts/run_sector_trading.py >> logs/cron.log 2>&1
```

### Python ìŠ¤ì¼€ì¤„ëŸ¬

```python
import schedule
import time

def job():
    os.system('python scripts/run_sector_trading.py')

# ë§¤ë‹¬ 1ì¼ ì‹¤í–‰
schedule.every().month.at("09:00").do(job)

while True:
    schedule.run_pending()
    time.sleep(3600)  # 1ì‹œê°„ë§ˆë‹¤ ì²´í¬
```

---

## ğŸ“‚ ì¶œë ¥ íŒŒì¼ êµ¬ì¡°

```
results/
â”œâ”€â”€ rebalancing_optimization/
â”‚   â”œâ”€â”€ optimization_results_20240101_080000.csv
â”‚   â”œâ”€â”€ optimization_results_20240101_080000_summary.txt
â”‚   â””â”€â”€ optimization_chart_20240101_080000.png
â”œâ”€â”€ model_comparison/
â”‚   â”œâ”€â”€ model_comparison_20240101_083000/
â”‚   â”‚   â”œâ”€â”€ model_comparison_20240101_083000.csv
â”‚   â”‚   â”œâ”€â”€ model_comparison_20240101_083000_metadata.json
â”‚   â”‚   â””â”€â”€ model_comparison_20240101_083000_summary.txt
â”‚   â””â”€â”€ comparison_chart_20240101_083000.png
â””â”€â”€ sector_trading/
    â”œâ”€â”€ selected_stocks_20240101_090000.csv      â† ì´ íŒŒì¼ í™•ì¸!
    â”œâ”€â”€ sector_config_20240101_090000.json
    â””â”€â”€ sector_summary_20240101_090000.csv
```

---

## ğŸ› ë¬¸ì œ í•´ê²°

### ë°ì´í„° ì—†ìŒ ì˜¤ë¥˜

```
ERROR: Price íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤
```

**í•´ê²°**: `./VIEW/` ë””ë ‰í† ë¦¬ì— ë°ì´í„° íŒŒì¼ í™•ì¸

### ì„¹í„° ì •ë³´ ì—†ìŒ

```
WARNING: ì„¹í„° ì •ë³´ê°€ ì—†ëŠ” ì£¼ì‹ ì œì™¸
```

**í•´ê²°**: `symbol_list.csv`ì— `sector` ì»¬ëŸ¼ ì¶”ê°€

### ì„ íƒëœ ì£¼ì‹ ì—†ìŒ

```
ERROR: ì„ íƒëœ ì£¼ì‹ì´ ì—†ìŠµë‹ˆë‹¤!
```

**í•´ê²°**:
1. ë°ì´í„° ê¸°ê°„ í™•ì¸
2. í”¼ì²˜ NaN ë¹„ìœ¨ í™•ì¸
3. ëª¨ë¸ í•™ìŠµ ë¡œê·¸ í™•ì¸

---

## ğŸ’¡ íŒ

### 1. ìµœì´ˆ ì‹¤í–‰ ìˆœì„œ

```bash
# 1ë‹¨ê³„: ìƒ˜í”Œ ë°ì´í„°ë¡œ í…ŒìŠ¤íŠ¸
cd examples
python comprehensive_example.py

# 2ë‹¨ê³„: ì‹¤ì œ ë°ì´í„°ë¡œ ë¦¬ë°¸ëŸ°ì‹± ê¸°ê°„ ìµœì í™”
cd ../scripts
python run_rebalance_optimization.py

# 3ë‹¨ê³„: ëª¨ë¸ ë¹„êµ
python run_model_comparison.py

# 4ë‹¨ê³„: ì£¼ì‹ ì„ íƒ
python run_sector_trading.py
```

### 2. ë¹ ë¥¸ í…ŒìŠ¤íŠ¸

```python
# run_sector_trading.pyì—ì„œ
TRAIN_YEARS = 1  # 3 â†’ 1ë¡œ ë³€ê²½ (ë¹ ë¥¸ í…ŒìŠ¤íŠ¸)
```

### 3. ë¡œê·¸ í™•ì¸

```bash
tail -f logs/sector_trading.log
```

---

## ğŸ“š ì¶”ê°€ ë¬¸ì„œ

- **ROBUST_VALIDATION_GUIDE.md**: ë°±í…ŒìŠ¤íŒ… ë° ê²€ì¦ ì‹œìŠ¤í…œ
- **ADVANCED_FEATURES_GUIDE.md**: 3ê°€ì§€ í•µì‹¬ ê¸°ëŠ¥ ìƒì„¸ ì„¤ëª…
- **examples/**: ì˜ˆì œ ìŠ¤í¬ë¦½íŠ¸

---

## ğŸ¤ ë¬¸ì˜

ë²„ê·¸ ë¦¬í¬íŠ¸ ë° ê°œì„  ì œì•ˆì€ ì´ìŠˆë¡œ ë“±ë¡í•´ì£¼ì„¸ìš”.
